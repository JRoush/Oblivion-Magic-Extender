
Existing Magic Item Flags:
===================================
have to keep these so as not to break any more mods than necessary
-	Autocalc:
-	IsFood: alchemy items & ingredients only.  relates to AI behavior, apparently
-	ImmuneToSilence: spell only - weapon,staff,scroll enchantments always immune to silence
								  use as a meta-magic property
-	PlayerStartSpell: spell only
-	AOEIgnoresLOS: spell only - possible to expand it to all magic item types?
-	SEFFAlwaysApplies: spell only - expand to all magic item types?  certainly expand to anything using the SEFF EffectHandler
-	NoAbsorbOrRelect: spell only - mostly supersceded by penetration for all magic item types
-	touch explodes w/o target: spell only - possible to expand to all magic item types?  not sure why this isn't *always* set

Meta Magic per Magic Item:
==========================
To be implemented with special "Meta" effects, hardcoded into libraries
-   Spell requries no target
    -   experience always granted
    -   Depricate touch explodes w/o target flag for spells; this behavior is always set for OnTarget spells
    -   Provides a 'dummy' target at point of impact, so that non-aoe spells will still have at least one valid target
-   AOE ignores caster
    - set by default, prevents caster from being affected by AOE
-   AOE ignores LOS
    - use existing flag, expand to all magic item types
-	Penetration
    -   counters up to (magnitude) points of MagicItem resistance + reflect + absorb
    -   does NOT affect individual effect resistances (so spell might hit, but all effects might still be resisted)
    -   incorporate NoAbsorbOrReflect + SEFFAlwaysApplies flags for spells
-   Magic Item Resistance: 
    -   override which actor value (or none at all) is used to resist magic item (not individual effect items)
-   School:
    -   overrides school
-	Hostility
    -   overrides the overall hostility of the magic item.  particularly important for potion/poison
-	Immune to Silence
    -   use existing flag, expand to all magic item types
-   Experience Gain Override
    -   adjust multiplier & reduction for repeat casting   
-   Selective Targeting: 
    -   Target a specific formID or LL of formIDs
    -   Target a specific base formtype or types
    -   Callback script: called potential targets valid targets, returns a float [0.0,1.0] indicating how 'valid' the target is
        spell is scaled before application based on return value, a la resistance [See EventHandler Callbacks]
    -   Target a specific hostility:
        Beneficial  - hit only allied targets, and neutral targets as well (why not?)
        Hostile     - hit only hostile targets
        Neutral     - hit all targets (same as no smart targeting)
        Automatic   - choose B/H/N independently for each effect item based on that effects hostility state
-   Subtlety
    -   casting has some percentile chance of being counted as an attack
    -   possibly scale by sneak and/or illusion and/or relevent school skill?
-	Persistent
    -   Spell does not expire normally:
        Type I: effects have no durations and never expire, a la abilities, diseases, and clothing enchantments        
        Type II:  effects are re-applied when the expire, complete with 
        -   resistance modifiers
        -   hit effects 
        -   AI updates
        -   Casting costs (magicka, fatigue, misc items, etc)
-   Chaining
    -   spell is spread to other targets within specified area
    -   different probabilities given for chaining on application, per second of duration, and on removal
-   Custom Requirements & Costs
    -   Fatigue cost
    -   Cooldown time (a la greater power) - can't reuse magic item until cooldown runs out
    -   Material requirement: formID + quantity
    -   Callback script: true/false if spell may be used [See EventHandler Callbacks]
    -   Callback script: applies misc useage cost [See EventHandler Callbacks]
-   EventHandler Callback Script
    -   FormID of function script to handle events:
        -   IsAbleToUse: returns true/false if spell may be used [See Custom Costs]
            If not useable, disables the action for the player (menu option greyed out, or err msg, etc).  
            For NPCs, it must disable the option in the AI processing.  Diseases should be rejected in favor of
            next availabe disease.  Abilities are simpyl discarded.
            Requires a hook into the equipitem menu & AI routines.
            For some types of magic (e.g. diseases, abilities, bound ench) the target is also available as a parameter
        -   ApplyUseageCost: applies misc useage cost [See Custom Costs]
        -   Use: hook for useage events (may need seperate warmup, charge, cast, cooldown events)
        -   Prehit: returns 'validity' of potential target [See Selective Targeting]
        -   Hit: hook for onhit event
        All events should check the item for UseMagicItem effects, and if necessary recurse to the appropriate event on the targeted magic item
-	Projectile Speed
    -   multiplies gmst that controls projectile speed
-	Projectile homing
        Type I: projectile remembers target and corrects trajectory towards it in flight
        Type II: projectile guided by player targeting cursor in flight (not available for non paleyr casters)
        need a new HUD targeting indicator to show when cursor is locked onto a valid target
-	Projectile bouncing
    -   projectile bounces off of solid objects (water surfaces? seeing a fireball refract would be funny, but not useful)
-   Stacking
    -   StackingType: enumeration, defines quantity for which total is limited on a single target
        -   None: applications of this magic item are independent of each other
        -   Count: number of concurrent applications from base spell (as long as at least 1 effect remains, the spell is still 'applied')
        -   Total Magicka: total equivalent magicka from all applications
        -   Caster specific (flag for all stacking types, determines whether limit only applies to applications from a common caster)
    -   StackingLimit(RSH) - global variable containing value, all spells that share the same global contribute to limit.
        Default for no global is 1, common only to magic item
    -   Action(RSH): enumeration
        -   None: contributes to limit, but does nothing to enforce it
        -   Prevent Use: disable use of magic item that would violate limit, display warning on attempt
        -   Remove: remove application(s) until limit is enforced
        -   Criteria: how to determine which applications are removed/disabled:
            -   greatest time passed (common to all effects from magic item)
            -   lowest magicka (total equivalent magicka of magic item)
    -   Default for spells (+ enchantments? + abilities? + powers?) is max count = 1, common to each spell, with oldest application removed
        Default for diseases, potions/poisons, etc. is no stacking at all
    -   Stacking behavior for individual effects is applied after this
-	Casting speed modifier
    -   spells, scrolls, staff enchantments only
    -   speeds up casting animation & associated AFX/VFX, therefore also affects charging & recast rates
-   Casting animation
    -   replaces automatic animation
    -   TODO - check complications from 1st-person casting
-	Chargeable/Recastable
    -   whether or not magic item may be charged or recast
    -   Includes seperate factors for each significant aspect of charging, so that magnitude might be changeable but not duration, etc.
-   Icon
    -   replaces icon from strongest effect
    -   for spells/enchantments only, since potions/ingreds/sigilstones already have icons
-   Spellmaking;/Enchanting
    -   whether or not spell is useable as a template for spellmaking and/or enchanting (applies before effectsetting/effectitem 'teaches' flag)
-	FX
    -   Which effect will provide model, shadres, and other visual & audio FX for the spell
    -   Optional additional overrides by FormID to CastingSound, HitEffectShader, and EnchantmentShader
-   TargetLoc 
    -   point in world geometry where caster was aiming.  Also, perhaps nearest magic target to caster aim / combat target
        for NPCs? Set automatically by casting routine, used by select handlers,.homing routines, etc.
        
File Format Notes:
==================
-   Copy of item name must be appended to record since the vanilla routines will overwrite the item name if they encounter an unexpected SCIT/FULL pair.